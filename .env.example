# ============================================
# RSS Skull Bot - Configuration Template
# ============================================
# Copy this file to .env and fill in your values
# cp .env.example .env

# ============================================
# Bot Configuration (REQUIRED)
# ============================================
# Get your bot token from @BotFather on Telegram
BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz-123456789

# ============================================
# Server Configuration
# ============================================
PORT=8916
HOST=0.0.0.0

# ============================================
# Database Configuration
# ============================================
# For production: file:/app/data/production.db
# For development: file:./prisma/data/development.db
DATABASE_URL=file:/app/data/production.db

# ============================================
# Redis Configuration
# ============================================
# Redis is used for BullMQ job queues
# Set DISABLE_REDIS=true if you don't have Redis
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
DISABLE_REDIS=false

# ============================================
# Application Configuration
# ============================================
NODE_ENV=production
LOG_LEVEL=info

# ============================================
# Access Control (optional)
# ============================================
# Restrict bot to respond only to your user ID
# To find your ID: Start a chat with @userinfobot on Telegram
# Leave empty to allow all users
ALLOWED_USER_ID=594484452

# ============================================
# Reddit API Configuration
# ============================================
# Method 1: RSS Only (recommended - no 403 errors)
# Uses https://www.reddit.com/r/subreddit/.rss
USE_REDDIT_API=false
USE_REDDIT_JSON_FALLBACK=false

# Method 2: OAuth API (requires Reddit app credentials)
# Get credentials from: https://www.reddit.com/prefs/apps
# 1. Create a "script" app (not "web app" or "installed app")
# 2. Copy Client ID (under the app name)
# 3. Copy Secret (click "edit" â†’ "secret")
# 4. Use your Reddit username and password (or app password if using 2FA)
REDDIT_CLIENT_ID=abc123def456ghi789jkl
REDDIT_CLIENT_SECRET=xyz789uvw456rst123opq
REDDIT_USERNAME=your_username_here
REDDIT_PASSWORD=your_password_here

# ============================================
# Feature Flags
# ============================================
FEATURE_INSTAGRAM=false

# ============================================
# Docker Image Configuration (optional)
# ============================================
# If using GitHub Container Registry:
# DOCKER_IMAGE=ghcr.io/runawaydevil/rss-skull-bot:latest
# 
# If using specific version:
# DOCKER_IMAGE=ghcr.io/runawaydevil/rss-skull-bot:v0.5.0
#
# If not set, docker-compose will build locally or use latest from GHCR

# ============================================
# Resilience System Configuration (optional)
# ============================================
# Enable/disable the resilience system for Telegram API
TELEGRAM_RESILIENCE_ENABLED=true

# Retry configuration
TELEGRAM_MAX_RETRIES=10
TELEGRAM_BASE_DELAY=1000
TELEGRAM_MAX_DELAY=60000

# Circuit breaker configuration
TELEGRAM_CIRCUIT_BREAKER_THRESHOLD=5
TELEGRAM_CIRCUIT_BREAKER_TIMEOUT=300000

# Message queue configuration
MESSAGE_QUEUE_ENABLED=true
MESSAGE_QUEUE_MAX_SIZE=1000
MESSAGE_QUEUE_BATCH_SIZE=20
MESSAGE_QUEUE_PROCESSING_INTERVAL=5000
MESSAGE_QUEUE_MESSAGE_TTL=3600000

# Health monitoring configuration
HEALTH_CHECK_INTERVAL=30000
ALERT_THRESHOLD_ERROR_RATE=0.1
ALERT_THRESHOLD_DOWNTIME_MINUTES=15
ALERT_THRESHOLD_QUEUE_SIZE=500

# Job cleanup configuration
JOB_CLEANUP_ENABLED=true
JOB_CLEANUP_INTERVAL_MINUTES=30
JOB_CLEANUP_THOROUGH_INTERVAL_HOURS=2
JOB_CLEANUP_ORPHANED_THRESHOLD=10

# ============================================
# Advanced Settings (optional)
# ============================================
# MAX_FEEDS_PER_CHAT=50
# CACHE_TTL_MINUTES=20
# CIRCUIT_BREAKER_THRESHOLD=3
# MIN_DELAY_MS=200000
